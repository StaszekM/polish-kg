schema: '2.0'
stages:
  union_tsv_files:
    cmd: python -m src.utils.union_tsv_files --paths data/entity_relation_extraction_multilingual/pl_corpora_test.tsv
      data/entity_relation_extraction_multilingual/pl_corpora_train.tsv --output_tsv
      data/edc_baseline/corpora.tsv
    deps:
    - path: data/entity_relation_extraction_multilingual/pl_corpora_test.tsv
      hash: md5
      md5: 33ebd7806442a008de570530bf022ce3
      size: 64062
    - path: data/entity_relation_extraction_multilingual/pl_corpora_train.tsv
      hash: md5
      md5: 9b2c3a6b0da42596a72c87f7c0c0b001
      size: 3151290
    - path: src/utils/union_tsv_files.py
      hash: md5
      md5: 4a8118fd9f8f8627acccabd83d28eff8
      size: 779
    outs:
    - path: data/edc_baseline/corpora.tsv
      hash: md5
      md5: c7b8b435f9abd99d96a23a06337dd0f3
      size: 3198138
  create_dataset_file:
    cmd: python -m src.edc_baseline.create_dataset_file --tsv_path data/edc_baseline/corpora_cleaned.tsv
      --output_path data/edc_baseline/dataset.txt --verbose --reference_output_path
      data/edc_baseline/reference.txt --subsample_size 0.001 --subsample_seed 11
    deps:
    - path: data/edc_baseline/corpora_cleaned.tsv
      hash: md5
      md5: 926d71bf43e26261ae0bf99d59ef32b7
      size: 3197757
    - path: src/edc_baseline/create_dataset_file.py
      hash: md5
      md5: 9151df4aa1ddec88d4ce5a37bef9cd2e
      size: 2581
    - path: src/edc_baseline/create_reference_file.py
      hash: md5
      md5: b86836aa557bfd91b3203c3b31d94e98
      size: 2609
    params:
      pipelines/edc_baseline/params.yaml:
        dataset_subsample_seed: 11
        dataset_subsample_size: 0.001
    outs:
    - path: data/edc_baseline/dataset.txt
      hash: md5
      md5: 43a4dbfd6af4e74694fec7321cce1ed3
      size: 1967
    - path: data/edc_baseline/reference.txt
      hash: md5
      md5: e5939889dc0216d46668f4b01b778395
      size: 785
  create_reference_file:
    cmd: python -m src.edc_baseline.create_reference_file --tsv_path data/edc_baseline/corpora_cleaned.tsv
      --output_path data/edc_baseline/reference.txt --verbose
    deps:
    - path: data/edc_baseline/corpora_cleaned.tsv
      hash: md5
      md5: 926d71bf43e26261ae0bf99d59ef32b7
      size: 3197757
    - path: src/edc_baseline/create_reference_file.py
      hash: md5
      md5: aa7ac2d7c17dde1ddd1affedf668802f
      size: 2292
    outs:
    - path: data/edc_baseline/reference.txt
      hash: md5
      md5: 9a05285d8aff08248e8565d82842ae06
      size: 804268
  precheck_corpora:
    cmd: python -m src.edc_baseline.precheck_corpora --tsv_path data/edc_baseline/corpora.tsv
      --output_path data/edc_baseline/corpora_cleaned.tsv --verbose
    deps:
    - path: data/edc_baseline/corpora.tsv
      hash: md5
      md5: c7b8b435f9abd99d96a23a06337dd0f3
      size: 3198138
    - path: src/edc_baseline/precheck_corpora.py
      hash: md5
      md5: 5f1b42360c0aff4823a9ff4501652aea
      size: 1008
    outs:
    - path: data/edc_baseline/corpora_cleaned.tsv
      hash: md5
      md5: 926d71bf43e26261ae0bf99d59ef32b7
      size: 3197757
  create_fewshot_examples:
    cmd: python -m src.edc_baseline.create_fewshot_examples --dataset_path data/edc_baseline/dataset.txt
      --schema_path data/edc_baseline/schema.csv --reference_path data/edc_baseline/reference.txt
      --oie_fewshot_output_path data/edc_baseline/oie_few_shot_examples.txt --sd_fewshot_output_path
      data/edc_baseline/sd_few_shot_examples.txt --random_state 11 --sample_size 6
    deps:
    - path: data/edc_baseline/dataset.txt
      hash: md5
      md5: 43a4dbfd6af4e74694fec7321cce1ed3
      size: 1967
    - path: data/edc_baseline/reference.txt
      hash: md5
      md5: e5939889dc0216d46668f4b01b778395
      size: 785
    - path: data/edc_baseline/schema.csv
      hash: md5
      md5: 2f3feedb09ff3d6ed1f97df88f748b1f
      size: 1569
    params:
      pipelines/edc_baseline/params.yaml:
        random_state: 11
        sample_size: 6
    outs:
    - path: data/edc_baseline/oie_few_shot_examples.txt
      hash: md5
      md5: 59d49cf0a5554c7b88ebb32fbaa273ea
      size: 977
    - path: data/edc_baseline/sd_few_shot_examples.txt
      hash: md5
      md5: 1f5a71573ddf31aac669b9e5b61eda3f
      size: 1665
